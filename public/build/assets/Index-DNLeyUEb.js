import{r as d,u as A,j as e,H as E,a as g}from"./app-B-LYN-qP.js";import{A as k}from"./AdminLayout-DWNLrZBi.js";import{M as I}from"./Modal-D2ufhNA4.js";import{P as T}from"./PrimaryButton-BcBTcuup.js";import F from"./PostForm-DLhNOg1I.js";import"./chevron-left-SCtUx9Q1.js";import"./createLucideIcon-Dy_SvITP.js";import"./transition-D1b-OlqD.js";import"./InputLabel-DscxIzPe.js";import"./TextInput-DnuAYHBu.js";import"./x-BAOldhlu.js";import"./eye-Bu4ba-OJ.js";import"./arrow-left-DSeu2xps.js";import"./user-BGE5ldQU.js";import"./calendar-B0pPtpuv.js";import"./clock-VHgh1Z33.js";import"./star-DocIOmsq.js";import"./plus-DsZZZOCo.js";import"./search-B1K87gTp.js";import"./loader-circle-Bq6BV-uZ.js";function te({auth:f,posts:r}){const[y,a]=d.useState(!1),[n,c]=d.useState(!1),[j,x]=d.useState(null),i={title:"",subtitle:"",category:"",status:"draft",description:"",content:"",featured_image:null,is_featured:!1,tags:[],seo_title:"",seo_description:"",seo_keywords:[],_method:"POST"},{data:b,setData:o,post:m,processing:N,errors:w,reset:u,clearErrors:p,transform:v}=A(i),_=()=>{c(!1),x(null),u(),p(),o(i),a(!0)},P=t=>{c(!0),x(t.id),p();let s="";if(Array.isArray(t.body)){const h=t.body.find(M=>M.type==="text");s=h?h.content:""}else typeof t.content=="string"&&(s=t.content);o({...i,...t,content:s,tags:t.tags||[],seo_keywords:t.seo_keywords||[],featured_image:typeof t.featured_image=="string"?t.featured_image:null,_method:"PUT"}),a(!0)},l=()=>{a(!1),u()},C=t=>{confirm("Are you sure you want to delete this post?")&&g.delete(route("posts.destroy",t))},S=()=>{v(s=>({...s,featured_image:s.featured_image,_method:n?"PUT":void 0,body:[{id:"section-main",type:"text",content:s.content}]}));const t={onSuccess:l,forceFormData:!0};m(n?route("posts.update",j):route("posts.store"),t)};return e.jsxs(k,{user:f.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Manage Posts"}),children:[e.jsx(E,{title:"Posts"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"All Posts"}),e.jsx(T,{onClick:_,children:"+ Create New Post"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.data.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),e.jsx("div",{className:"text-xs text-gray-500",children:t.subtitle}),t.is_featured&&e.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-2 rounded-full",children:"Featured"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:t.category||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>P(t),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>C(t.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},t.id)),r.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No posts found."})})]})]})}),e.jsx("div",{className:"mt-4",children:r.links.map((t,s)=>e.jsx("button",{onClick:()=>t.url&&g.get(t.url),disabled:!t.url||t.active,className:`px-3 py-1 mr-1 border rounded text-sm ${t.active?"bg-gray-800 text-white":"bg-white text-gray-700 hover:bg-gray-100"} ${t.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},s))})]})})}),e.jsx(I,{show:y,onClose:l,maxWidth:"7xl",children:e.jsx("div",{className:"h-[90vh] w-full",children:e.jsx(F,{data:b,setData:o,errors:w,processing:N,onClose:l,onSubmit:S})})})]})}export{te as default};
