import{j as e,c as I,u as T,H as B,L as _,a as k,r as v}from"./app-BfzQegNP.js";import{G as E}from"./GuestLayout-BHfRZ-_i.js";import{A as H}from"./index-B8zCaI2n.js";import{m as g}from"./proxy-xf1qg_-T.js";import{T as G}from"./triangle-alert-EQg0joUf.js";import{A as V}from"./arrow-left-C_rpdR7f.js";import{U as J}from"./user-DWOnlrwQ.js";import{C as Z}from"./calendar-CTATD4nQ.js";import{t as f,c as K,n as D,g as S,a as Q,e as W,m as C,b as N,S as ee}from"./en-US-DTtPnvbY.js";import{C as te}from"./clock-Z62v7VRp.js";import{E as se}from"./eye-DddPPozH.js";import{H as ae}from"./heart-CSf60eg9.js";import{M as re}from"./message-circle-CyKCut5t.js";import{S as ne}from"./send-C5HcDg8t.js";import{c as O}from"./createLucideIcon-DkSUXOye.js";import{M as ie}from"./message-square-kPMlztvo.js";const le=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],L=O("thumbs-up",le);const oe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ce=O("trash-2",oe);function w(t,s){const a=+f(t)-+f(s);return a<0?-1:a>0?1:a}function de(t){return K(t,Date.now())}function me(t,s,a){const[i,r]=D(a?.in,t,s),c=i.getFullYear()-r.getFullYear(),d=i.getMonth()-r.getMonth();return c*12+d}function ue(t){return s=>{const a=Math.trunc,i=a(s);return i===0?0:i}}function xe(t,s){return+f(t)-+f(s)}function he(t,s){const a=f(t,s?.in);return a.setHours(23,59,59,999),a}function ge(t,s){const a=f(t,s?.in),i=a.getMonth();return a.setFullYear(a.getFullYear(),i+1,0),a.setHours(23,59,59,999),a}function fe(t,s){const a=f(t,s?.in);return+he(a,s)==+ge(a,s)}function pe(t,s,a){const[i,r,c]=D(a?.in,t,t,s),d=w(r,c),l=Math.abs(me(r,c));if(l<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-d*l);let h=w(r,c)===-d;fe(i)&&l===1&&w(i,c)===1&&(h=!1);const m=d*(l-+h);return m===0?0:m}function be(t,s,a){const i=xe(t,s)/1e3;return ue()(i)}function ye(t,s,a){const r=Q().locale??W,c=2520,d=w(t,s);if(isNaN(d))throw new RangeError("Invalid time value");const l=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:d}),[h,m]=D(a?.in,...d>0?[s,t]:[t,s]),y=be(m,h),p=(S(m)-S(h))/1e3,o=Math.round((y-p)/60);let x;if(o<2)return o===0?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",o,l);if(o<45)return r.formatDistance("xMinutes",o,l);if(o<90)return r.formatDistance("aboutXHours",1,l);if(o<C){const n=Math.round(o/60);return r.formatDistance("aboutXHours",n,l)}else{if(o<c)return r.formatDistance("xDays",1,l);if(o<N){const n=Math.round(o/C);return r.formatDistance("xDays",n,l)}else if(o<N*2)return x=Math.round(o/N),r.formatDistance("aboutXMonths",x,l)}if(x=pe(m,h),x<12){const n=Math.round(o/N);return r.formatDistance("xMonths",n,l)}else{const n=x%12,u=Math.trunc(x/12);return n<3?r.formatDistance("aboutXYears",u,l):n<9?r.formatDistance("overXYears",u,l):r.formatDistance("almostXYears",u+1,l)}}function R(t,s){return ye(t,de(t),s)}const je=({isOpen:t,onClose:s,onConfirm:a,isDeleting:i,type:r="comment"})=>{const c=r.charAt(0).toUpperCase()+r.slice(1);return e.jsx(H,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[60]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[70] p-4 pointer-events-none",children:e.jsxs(g.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden pointer-events-auto border border-gray-100",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"shrink-0 w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-600",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Delete ",c,"?"]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500 leading-relaxed",children:["Are you sure you want to delete this ",r,"? This action cannot be undone."]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex gap-3 justify-end border-t border-gray-100",children:[e.jsx("button",{onClick:s,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:a,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors shadow-sm disabled:opacity-70 flex items-center gap-2",children:i?"Deleting...":"Delete"})]})]})})]})})};function A(t){try{if(!t)return"";t=t.replace(/<(script|style)[^>]*>[\s\S]*?<\/(script|style)>/gi,"");const s=["p","br","b","strong","i","em","u","ul","ol","li","span","blockquote","code","pre","h1","h2","h3","h4","h5","h6"];return t.replace(/<([^>]+)>/g,(a,i)=>{const r=i.split(" ")[0].replace(/\//g,"").toLowerCase();return s.includes(r)?a:""})}catch{return t}}const q=({comment:t,postId:s,depth:a=0})=>{const{auth:i}=I().props,[r,c]=v.useState(!1),[d,l]=v.useState(!0),[h,m]=v.useState(!1),[y,p]=v.useState(!1),{data:o,setData:x,post:n,processing:u,reset:F}=T({comment:"",parent_id:t.id}),Y=b=>{b.preventDefault(),n(route("comments.store",s),{onSuccess:()=>{c(!1),F(),l(!0)},preserveScroll:!0})},z=()=>{i.user&&k.post(route("comments.like",t.id),{},{preserveScroll:!0})},U=()=>{m(!0)},$=()=>{p(!0),k.delete(route("comments.destroy",t.id),{preserveScroll:!0,onFinish:()=>{p(!1),m(!1)}})},j=t.user?t.user.name:"Anonymous",M=t.user?t.user.avatar:null,P=j.charAt(0).toUpperCase(),X=i.user&&t.user&&i.user.id===t.user.id;return e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"shrink-0",children:M?e.jsx("img",{src:M,alt:j,className:"w-8 h-8 md:w-10 md:h-10 rounded-full object-cover border border-gray-200"}):e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-xs md:text-sm border-2 border-white",children:P})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"bg-gray-50/50 p-3 rounded-2xl rounded-tl-none border border-gray-100 hover:border-gray-200 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-sm truncate",children:j}),e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap ml-2",children:t.created_at?R(new Date(t.created_at)):""})]}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed whitespace-pre-wrap break-words",children:t.comment})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 ml-2",children:[i.user?e.jsxs("button",{onClick:z,className:`flex items-center gap-1.5 text-xs font-medium transition-colors ${t.is_liked?"text-blue-600":"text-gray-500 hover:text-gray-800"}`,children:[e.jsx(L,{className:`w-3.5 h-3.5 ${t.is_liked?"fill-current":""}`}),e.jsx("span",{children:t.likes_count>0?t.likes_count:"Like"})]}):e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400",title:"Log in to like",children:[e.jsx(L,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:t.likes_count>0?t.likes_count:"0"})]}),i.user&&a===0&&e.jsxs("button",{onClick:()=>c(!r),className:"flex items-center gap-1.5 text-xs font-medium text-gray-500 hover:text-gray-800 transition-colors",children:[e.jsx(ie,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Reply"})]}),X&&e.jsxs("button",{onClick:U,className:"flex items-center gap-1.5 text-xs font-medium text-gray-400 hover:text-red-600 transition-colors ml-auto md:ml-0",title:"Delete comment",children:[e.jsx(ce,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Delete"})]})]}),e.jsx(H,{children:r&&e.jsx(g.form,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 overflow-hidden",onSubmit:Y,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-0.5 bg-gray-200 mb-2 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:o.comment,onChange:b=>x("comment",b.target.value),placeholder:`Replying to ${j}...`,className:"w-full p-2 text-sm border-gray-200 rounded-lg focus:border-blue-500 focus:ring-blue-500 bg-white",rows:2,autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-3 py-1 text-xs font-medium text-gray-500 hover:text-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||!o.comment.trim(),className:"px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 disabled:opacity-50",children:"Post Reply"})]})]})]})})})]})]}),t.replies&&t.replies.length>0&&e.jsxs("div",{className:"mt-3 pl-4 md:pl-6 relative",children:[e.jsx("div",{className:"absolute left-[20px] md:left-[28px] top-0 bottom-0 w-px bg-gray-200 -z-10"}),e.jsx("div",{className:"flex flex-col gap-4",children:t.replies.map(b=>e.jsx(q,{comment:b,postId:s,depth:a+1},b.id))})]}),e.jsx(je,{isOpen:h,onClose:()=>m(!1),onConfirm:$,isDeleting:y,type:a>0?"reply":"comment"})]})};function qe({post:t,seo:s,readTime:a}){const{auth:i}=I().props,{data:r,setData:c,post:d,processing:l,reset:h}=T({comment:"",parent_id:null}),m=()=>{k.post(route("posts.like",t.id),{},{preserveScroll:!0})},y=()=>{d(route("comments.store",t.id),{onSuccess:()=>h(),preserveScroll:!0})},p=async()=>{if(navigator.share)try{await navigator.share({title:t.title,text:t.description,url:window.location.href})}catch(n){console.log("Error sharing:",n)}else navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")},o=Array.isArray(t.body)?t.body:[],x="blog-content text-gray-800 leading-relaxed [&>h1]:text-4xl [&>h1]:font-bold [&>h1]:text-gray-900 [&>h1]:mb-6 [&>h1]:mt-8 [&>h2]:text-3xl [&>h2]:font-semibold [&>h2]:text-gray-900 [&>h2]:mb-5 [&>h2]:mt-7 [&>h3]:text-2xl [&>h3]:font-semibold [&>h3]:text-gray-900 [&>h3]:mb-4 [&>h3]:mt-6 [&>p]:mb-4 [&>p]:leading-relaxed [&>ul]:mb-4 [&>ul]:ml-6 [&>ul]:list-disc [&>ol]:mb-4 [&>ol]:ml-6 [&>ol]:list-decimal [&>li]:mb-2 [&>blockquote]:border-l-4 [&>blockquote]:border-blue-500 [&>blockquote]:bg-blue-50 [&>blockquote]:py-4 [&>blockquote]:px-6 [&>blockquote]:my-6 [&>blockquote]:italic [&>code]:bg-gray-100 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-mono [&>pre]:bg-gray-900 [&>pre]:text-gray-100 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:my-6 [&>strong]:font-semibold [&>em]:italic [&>u]:underline";return e.jsxs(E,{children:[e.jsxs(B,{children:[e.jsx("title",{children:s.title}),e.jsx("meta",{name:"description",content:s.description}),t.tags&&t.tags.length>0&&e.jsx("meta",{name:"keywords",content:t.tags.join(", ")}),e.jsx("link",{rel:"canonical",href:s.canonical}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("meta",{property:"og:title",content:s.title}),e.jsx("meta",{property:"og:description",content:s.description}),e.jsx("meta",{property:"og:url",content:s.canonical}),e.jsx("meta",{property:"og:site_name",content:"Your Blog Name"}),s.image&&e.jsx("meta",{property:"og:image",content:s.image}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:s.title}),e.jsx("meta",{name:"twitter:description",content:s.description}),s.image&&e.jsx("meta",{name:"twitter:image",content:s.image}),e.jsx("meta",{property:"article:published_time",content:t.published_at}),e.jsx("meta",{property:"article:author",content:t.author?.name}),t.tags&&t.tags.map(n=>e.jsx("meta",{property:"article:tag",content:n},n))]}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("article",{className:"relative max-w-3xl md:max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 md:pt-16 pb-20",children:[e.jsx(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-8 md:mb-10",children:e.jsxs(_,{href:route("blog.index"),className:"inline-flex items-center text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(V,{className:"w-4 h-4 mr-2"})," Back to Blog"]})}),e.jsxs(g.header,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10 md:mb-12",children:[e.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight tracking-tight",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:t.author?.name||"Admin"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:t.published_at?R(new Date(t.published_at))+" ago":"Just now"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[a," min read"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[t.views," views"]})]})]}),t.subtitle&&e.jsx("p",{className:"text-xl text-gray-700 leading-relaxed mb-4",children:t.subtitle}),t.description&&e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:t.description})]}),t.featured_image&&e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-10",children:e.jsx("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg shadow-sm",children:e.jsx("img",{src:`/storage/${t.featured_image}`,alt:t.title,className:"object-cover w-full h-auto rounded-lg"})})}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"flex flex-wrap gap-4 mb-12 pb-8 border-b border-gray-200",children:[e.jsxs("button",{onClick:m,className:`inline-flex items-center px-4 py-2 border rounded-md text-sm font-medium transition-all ${t.is_liked?"bg-green-50 border-green-200 text-green-600":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(ae,{className:`w-4 h-4 mr-2 ${t.is_liked?"fill-current":""}`}),t.total_likes||0," ",t.total_likes===1?"Like":"Likes"]}),e.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Share"]})]}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"max-w-none",children:(!o||o.length===0)&&t.content?e.jsx("div",{className:x,dangerouslySetInnerHTML:{__html:A(t.content)}}):o.map((n,u)=>e.jsx("div",{className:"mb-6",children:n.type==="text"?e.jsx("div",{className:x,dangerouslySetInnerHTML:{__html:A(n.content)}}):n.type==="image"?e.jsxs("div",{className:"my-8",children:[e.jsx("div",{className:"relative w-full overflow-hidden rounded-lg",children:e.jsx("img",{src:n.content,alt:n.alt||`Image ${u+1}`,className:"object-cover w-full h-auto"})}),n.caption&&e.jsx("p",{className:"text-sm text-gray-600 text-center mt-2 italic",children:n.caption})]}):null},u))}),t.tags&&t.tags.length>0&&e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"mt-14 pt-10 border-t border-gray-200 mb-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((n,u)=>e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full",children:["#",n]},u))})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(re,{className:"w-5 h-5 mr-2"}),"Comments (",t.comments?t.comments.reduce((n,u)=>n+1+(u.replies?.length||0),0):0,")"]}),i.user?e.jsxs("div",{className:"mb-8 bg-gray-50 rounded-lg p-4 flex gap-4 border border-gray-100",children:[e.jsx("div",{className:"shrink-0",children:i.user.avatar?e.jsx("img",{src:i.user.avatar,alt:i.user.name,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-sm border-2 border-white",children:i.user.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:r.comment,onChange:n=>c("comment",n.target.value),placeholder:"Share your thoughts...",className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",rows:3}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsxs("button",{onClick:y,disabled:!r.comment.trim()||l,className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),l?"Posting...":"Post Comment"]})})]})]}):e.jsx("div",{className:"mb-8 bg-gray-50 rounded-lg p-6 text-center border border-gray-100",children:e.jsxs("p",{className:"text-gray-600",children:["Please ",e.jsx(_,{href:route("login"),className:"text-blue-600 hover:underline font-medium",children:"log in"})," to join the discussion."]})}),e.jsxs("div",{className:"space-y-4",children:[t.comments&&t.comments.map(n=>e.jsx(q,{comment:n,postId:t.id},n.id)),(!t.comments||t.comments.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-200",children:"No comments yet. Be the first to share your thoughts!"})]})]})]})})]})}export{qe as default};
