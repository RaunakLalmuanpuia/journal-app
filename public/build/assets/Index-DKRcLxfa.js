import{r as n,a as h,j as e,H as y,L as u}from"./app-BqWjZP6K.js";import{A as v}from"./AdminLayout-DeOxArN9.js";import"./chevron-left-Pw_jplIX.js";import"./createLucideIcon-Drnn-Lt7.js";const b=(r,l)=>{const[c,i]=n.useState(r);return n.useEffect(()=>{const o=setTimeout(()=>i(r),l);return()=>clearTimeout(o)},[r,l]),c};function C({auth:r,users:l,roles:c,filters:i}){const[o,g]=n.useState(i.search||""),[x,p]=n.useState(i.role||""),m=b(o,300);n.useEffect(()=>{(m!==(i.search||"")||x!==(i.role||""))&&h.get(route("users.index"),{search:m,role:x},{preserveState:!0,replace:!0})},[m,x]);const f=(t,s)=>{s&&h.put(route("users.updateRole",t.id),{role:s},{preserveScroll:!0})},j=t=>{const d=t.status==="Active"?"deactivate":"activate";confirm(`Are you sure you want to ${d} this user?`)&&h.patch(route("users.toggleStatus",t.id),{},{preserveScroll:!0})};return e.jsxs(v,{user:r.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Users"}),children:[e.jsx(y,{title:"All Users"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"User List"}),e.jsxs("div",{className:"flex flex-col items-end w-full md:w-auto gap-2",children:[e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx("input",{type:"text",placeholder:"Search name or email...",value:o,onChange:t=>g(t.target.value),className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full md:w-64"}),e.jsxs("select",{value:x,onChange:t=>p(t.target.value),className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full md:w-48",children:[e.jsx("option",{value:"",children:"All Roles"}),c.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx(u,{href:route("users.index"),className:"text-xs text-gray-500 hover:text-gray-800 underline",children:"Clear Filters"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[l.data.map(t=>{const s=t.id===r.user.id,d=t.status==="Active";return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 font-bold overflow-hidden",children:t.avatar?e.jsx("img",{src:t.avatar,className:"w-full h-full object-cover"}):t.name.charAt(0)})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.roles.length>0?t.roles.map(a=>e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 mr-1",children:a},a)):e.jsx("span",{className:"text-gray-400 text-xs italic",children:"No Role"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.created_at}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("select",{className:"text-xs border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 py-1 cursor-pointer disabled:opacity-50",value:t.roles[0]||"",onChange:a=>f(t,a.target.value),disabled:s,children:[t.roles.length===0&&e.jsx("option",{value:"",children:"Assign Role"}),c.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("button",{onClick:()=>j(t),disabled:s,className:`px-3 py-1 rounded text-xs font-semibold text-white transition shadow-sm ${d?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"} ${s?"opacity-50 cursor-not-allowed":""}`,children:d?"Deactivate":"Activate"})]})})]},t.id)}),l.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No users found."})})]})]})}),e.jsx("div",{className:"mt-4 flex flex-wrap",children:l.links.map((t,s)=>t.url?e.jsx(u,{href:t.url,dangerouslySetInnerHTML:{__html:t.label},className:`px-3 py-1 border rounded mr-1 text-sm ${t.active?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 hover:bg-gray-100"}`},s):e.jsx("span",{dangerouslySetInnerHTML:{__html:t.label},className:"px-3 py-1 border rounded mr-1 text-sm text-gray-400 cursor-not-allowed bg-gray-50"},s))})]})})})})]})}export{C as default};
